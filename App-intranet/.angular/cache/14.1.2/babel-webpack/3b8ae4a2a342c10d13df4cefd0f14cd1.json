{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/intranet-post.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction NewIntranetPostComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"img\", 13);\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const faceSnap_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 5, faceSnap_r1.title));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Mis en ligne \", i0.ɵɵpipeBind2(6, 7, faceSnap_r1.createdDate, \"\\u00E0 HH:mm, le d MMMM yyyy\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", faceSnap_r1.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", faceSnap_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(faceSnap_r1.description);\n  }\n}\n\nexport class NewIntranetPostComponent {\n  constructor(formBuilder, intranetPostService, router) {\n    this.formBuilder = formBuilder;\n    this.intranetPostService = intranetPostService;\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.urlRegex = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/;\n    this.postForm = this.formBuilder.group({\n      title: [null, Validators.required],\n      description: [null, Validators.required],\n      imageUrl: [null, [Validators.required, Validators.pattern(this.urlRegex)]]\n    }, {\n      updateOn: 'blur'\n    });\n    this.intranetPostPreview$ = this.postForm.valueChanges.pipe(map(formvalue => ({ ...formvalue,\n      createdDate: new Date(),\n      snaps: 0,\n      id: 0\n    })));\n  }\n\n  onSubmitForm() {\n    this.intranetPostService.addIntranetPost(this.postForm.value);\n    this.router.navigateByUrl('/intranetPosts');\n  }\n\n}\n\nNewIntranetPostComponent.ɵfac = function NewIntranetPostComponent_Factory(t) {\n  return new (t || NewIntranetPostComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.IntranetPostService), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nNewIntranetPostComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewIntranetPostComponent,\n  selectors: [[\"app-new-intranet-post\"]],\n  decls: 22,\n  vars: 5,\n  consts: [[1, \"form-card\"], [3, \"formGroup\"], [1, \"form-group\"], [\"for\", \"title\"], [\"id\", \"title\", \"type\", \"text\", \"formControlName\", \"title\"], [\"for\", \"description\"], [\"id\", \"description\", \"type\", \"text\", \"formControlName\", \"description\", \"rows\", \"4\"], [\"for\", \"imageUrl\"], [\"id\", \"imageUrl\", \"type\", \"text\", \"formControlName\", \"imageUrl\"], [1, \"action-buttons\"], [\"type\", \"submit\", 3, \"disabled\", \"click\"], [\"class\", \"face-snap-card\", 4, \"ngIf\"], [1, \"face-snap-card\"], [3, \"src\", \"alt\"]],\n  template: function NewIntranetPostComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"NOUVEAU POST\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"form\", 1)(4, \"div\", 2)(5, \"label\", 3);\n      i0.ɵɵtext(6, \"Titre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 2)(9, \"label\", 5);\n      i0.ɵɵtext(10, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"textarea\", 6);\n      i0.ɵɵtext(12, \"        \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 2)(14, \"label\", 7);\n      i0.ɵɵtext(15, \"URL de l'image\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 9)(18, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function NewIntranetPostComponent_Template_button_click_18_listener() {\n        return ctx.onSubmitForm();\n      });\n      i0.ɵɵtext(19, \"Enregistrer\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵtemplate(20, NewIntranetPostComponent_div_20_Template, 10, 10, \"div\", 11);\n      i0.ɵɵpipe(21, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.postForm);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"disabled\", ctx.postForm.invalid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(21, 3, ctx.intranetPostPreview$));\n    }\n  },\n  dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i4.AsyncPipe, i4.UpperCasePipe, i4.DatePipe],\n  styles: [\".form-card[_ngcontent-%COMP%] {\\n  box-sizing: border-box;\\n  width: 50%;\\n  margin: 20px auto;\\n  padding: 10px 30px;\\n  box-shadow: lightgray 4px 4px 20px;\\n}\\n\\n.face-snap-card[_ngcontent-%COMP%] {\\n  box-sizing: border-box;\\n  width: 50%;\\n  margin: 20px auto;\\n  padding: 10px 30px;\\n  box-shadow: lightgray 4px 4px 20px;\\n}\\n\\n.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  margin-bottom: 0;\\n}\\n\\n.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-weight: 300;\\n  font-size: 16px;\\n}\\n\\n.form-group[_ngcontent-%COMP%] {\\n  margin: 10px auto;\\n  width: 80%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n\\ninput[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%] {\\n  width: 50%;\\n}\\n\\n.action-buttons[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  display: block;\\n  margin: 20px auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy1pbnRyYW5ldC1wb3N0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksc0JBQUE7RUFDQSxVQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtDQUFBO0FBQ0o7O0FBQ0E7RUFDSSxzQkFBQTtFQUNBLFVBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0Esa0NBQUE7QUFFSjs7QUFDSTtFQUNJLFdBQUE7QUFFUjs7QUFBSTtFQUNJLGdCQUFBO0FBRVI7O0FBQUk7RUFDSSxnQkFBQTtFQUNBLGVBQUE7QUFFUjs7QUFFQTtFQUNJLGlCQUFBO0VBQ0EsVUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDhCQUFBO0FBQ0o7O0FBRUE7RUFDSSxVQUFBO0FBQ0o7O0FBRUE7RUFDSSxXQUFBO0FBQ0o7O0FBRUE7RUFDSSxjQUFBO0VBQ0EsaUJBQUE7QUFDSiIsImZpbGUiOiJuZXctaW50cmFuZXQtcG9zdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mb3JtLWNhcmQge1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBtYXJnaW46IDIwcHggYXV0bztcclxuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcclxuICAgIGJveC1zaGFkb3c6IGxpZ2h0Z3JheSA0cHggNHB4IDIwcHg7XHJcbn1cclxuLmZhY2Utc25hcC1jYXJke1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBtYXJnaW46IDIwcHggYXV0bztcclxuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcclxuICAgIGJveC1zaGFkb3c6IGxpZ2h0Z3JheSA0cHggNHB4IDIwcHg7XHJcbn1cclxuLmZhY2Utc25hcC1jYXJkIHtcclxuICAgIGltZyB7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICB9XHJcbiAgICBoMiB7XHJcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcclxuICAgIH1cclxuICAgIHAge1xyXG4gICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XHJcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgfVxyXG59XHJcblxyXG4uZm9ybS1ncm91cCB7XHJcbiAgICBtYXJnaW46IDEwcHggYXV0bztcclxuICAgIHdpZHRoOiA4MCU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxufVxyXG5cclxuaW5wdXQsIHRleHRhcmVhIHtcclxuICAgIHdpZHRoOiA1MCU7XHJcbn1cclxuXHJcbi5hY3Rpb24tYnV0dG9ucyB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuYnV0dG9uIHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgbWFyZ2luOiAyMHB4IGF1dG87XHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"AACA,SAAiCA,UAAjC,QAAmD,gBAAnD;AAGA,SAAQC,GAAR,QAAkB,gBAAlB;;;;;;;;;ICiBAC,gCAA6E,CAA7E,EAA6E,IAA7E;IACMA;;IAAgCA;IACpCA;IAAGA;;IAAyEA;IAC5EA;IACAA;IAAGA;IAA0BA;;;;;IAHzBA;IAAAA;IACDA;IAAAA;IACEA;IAAAA,6DAAyB,KAAzB,EAAyBC,iBAAzB;IACFD;IAAAA;;;;ADZL,OAAM,MAAOE,wBAAP,CAA+B;EAMnCC,YAAoBC,WAApB,EACoBC,mBADpB,EAEoBC,MAFpB,EAEkC;IAFd;IACA;IACA;EAAmB;;EAEvCC,QAAQ;IACN,KAAKC,QAAL,GAAgB,gGAAhB;IACA,KAAKC,QAAL,GAAgB,KAAKL,WAAL,CAAiBM,KAAjB,CAAuB;MACrCC,KAAK,EAAE,CAAC,IAAD,EAAOb,UAAU,CAACc,QAAlB,CAD8B;MAErCC,WAAW,EAAE,CAAC,IAAD,EAAOf,UAAU,CAACc,QAAlB,CAFwB;MAGrCE,QAAQ,EAAE,CAAC,IAAD,EAAO,CAAChB,UAAU,CAACc,QAAZ,EAAsBd,UAAU,CAACiB,OAAX,CAAmB,KAAKP,QAAxB,CAAtB,CAAP;IAH2B,CAAvB,EAIb;MACDQ,QAAQ,EAAE;IADT,CAJa,CAAhB;IAOA,KAAKC,oBAAL,GAA4B,KAAKR,QAAL,CAAcS,YAAd,CAA2BC,IAA3B,CAC1BpB,GAAG,CAACqB,SAAS,KAAK,EAChB,GAAGA,SADa;MACFC,WAAW,EAAC,IAAIC,IAAJ,EADV;MACsBC,KAAK,EAAE,CAD7B;MACgCC,EAAE,EAAE;IADpC,CAAL,CAAV,CADuB,CAA5B;EAKD;;EAEDC,YAAY;IACV,KAAKpB,mBAAL,CAAyBqB,eAAzB,CAAyC,KAAKjB,QAAL,CAAckB,KAAvD;IACA,KAAKrB,MAAL,CAAYsB,aAAZ,CAA0B,gBAA1B;EACD;;AA7BkC;;;mBAAxB1B,0BAAwBF;AAAA;;;QAAxBE;EAAwB2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCbrCjC,+BAAuB,CAAvB,EAAuB,IAAvB;MACMA;MAAYA;MAChBA,gCAA6B,CAA7B,EAA6B,KAA7B,EAA6B,CAA7B,EAA6B,CAA7B,EAA6B,OAA7B,EAA6B,CAA7B;MAEuBA;MAAKA;MACxBA;MACFA;MACAA,+BAAwB,CAAxB,EAAwB,OAAxB,EAAwB,CAAxB;MAC6BA;MAAWA;MACpCA;MACAA;MAAAA;MAEJA,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,CAAxB;MAC0BA;MAAcA;MACpCA;MACJA;MACAA,gCAA4B,EAA5B,EAA4B,QAA5B,EAA4B,EAA5B;MAC0BA;QAAA,OAASkC,kBAAT;MAAuB,CAAvB;MAAuDlC;MAAWA;MAIhGA;;;;;MAnBQA;MAAAA;MAe+CA;MAAAA;MAI1BA;MAAAA","names":["Validators","map","i0","faceSnap_r1","NewIntranetPostComponent","constructor","formBuilder","intranetPostService","router","ngOnInit","urlRegex","postForm","group","title","required","description","imageUrl","pattern","updateOn","intranetPostPreview$","valueChanges","pipe","formvalue","createdDate","Date","snaps","id","onSubmitForm","addIntranetPost","value","navigateByUrl","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Work\\MyApp\\Groupomania\\groupomania-P7-08082022\\App-intranet\\src\\app\\new-intranet-post\\new-intranet-post.component.ts","C:\\Work\\MyApp\\Groupomania\\groupomania-P7-08082022\\App-intranet\\src\\app\\new-intranet-post\\new-intranet-post.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { IntranetPost } from '../models/intranet-post.model';\nimport {map} from 'rxjs/operators'\nimport { IntranetPostService } from '../services/intranet-post.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-new-intranet-post',\n  templateUrl: './new-intranet-post.component.html',\n  styleUrls: ['./new-intranet-post.component.scss']\n})\nexport class NewIntranetPostComponent implements OnInit {\n\n  postForm: FormGroup;\n  intranetPostPreview$: Observable<IntranetPost>;\n  urlRegex: RegExp;\n\n  constructor(private formBuilder: FormBuilder,\n              private intranetPostService: IntranetPostService,\n              private router: Router) { }\n\n  ngOnInit(): void {\n    this.urlRegex = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/;\n    this.postForm = this.formBuilder.group({\n      title: [null, Validators.required],\n      description: [null, Validators.required],\n      imageUrl: [null, [Validators.required, Validators.pattern(this.urlRegex)]]\n    }, {\n      updateOn: 'blur'\n    });\n    this.intranetPostPreview$ = this.postForm.valueChanges.pipe(\n      map(formvalue => ({\n        ...formvalue, createdDate:new Date(), snaps: 0, id: 0\n      }))\n    );\n  }\n\n  onSubmitForm(): void {\n    this.intranetPostService.addIntranetPost(this.postForm.value);\n    this.router.navigateByUrl('/intranetPosts');\n  }\n\n}\n","<div class=\"form-card\">\n  <h2>NOUVEAU POST</h2>\n  <form [formGroup]=\"postForm\">\n    <div class=\"form-group\">\n      <label for=\"title\">Titre</label>\n      <input id=\"title\" type=\"text\" formControlName=\"title\">\n    </div>\n    <div class=\"form-group\">\n        <label for=\"description\">Description</label>\n        <textarea id=\"description\" type=\"text\" formControlName=\"description\" rows=\"4\">\n        </textarea>\n    </div>\n    <div class=\"form-group\">\n        <label for=\"imageUrl\">URL de l'image</label>\n        <input id=\"imageUrl\" type=\"text\" formControlName=\"imageUrl\">\n    </div>\n    <div class=\"action-buttons\">\n        <button type=\"submit\" (click)=\"onSubmitForm()\" [disabled]=\"postForm.invalid\">Enregistrer</button>\n    </div>\n  </form>\n</div>\n<div class=\"face-snap-card\" *ngIf=\"intranetPostPreview$ | async as faceSnap\">\n  <h2>{{ faceSnap.title | uppercase }}</h2>\n  <p>Mis en ligne {{ faceSnap.createdDate | date: 'à HH:mm, le d MMMM yyyy' }}</p>\n  <img [src]=\"faceSnap.imageUrl\" [alt]=\"faceSnap.title\">\n  <p>{{ faceSnap.description }}</p>\n</div>"]},"metadata":{},"sourceType":"module"}